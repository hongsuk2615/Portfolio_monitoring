<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <title>관리자 로그인 - 모니터링 시스템</title>
    <th:block th:replace="~{layout/commonHeader :: commonHeader}"></th:block>
</head>
<body>
<div class="login-container">
    <div class="login-card">
        <h1><i class="bi bi-shield-lock-fill"></i> 관리자 로그인</h1>

        <div id="errorMessage" class="alert alert-danger" style="display: none;"></div>

        <form id="loginForm" th:action="@{/admin/login}" method="post">
            <div class="mb-3">
                <label for="username" class="form-label">아이디</label>
                <input type="text" class="form-control" id="username" name="username" placeholder="관리자 아이디를 입력하세요" required autofocus>
            </div>
            <div class="mb-3">
                <label for="password" class="form-label">비밀번호</label>
                <input type="password" class="form-control" id="password" name="password" placeholder="비밀번호를 입력하세요" required>
            </div>
            <div class="mb-3 form-check">
                <input type="checkbox" class="form-check-input" id="rememberMe" name="remember-me">
                <label class="form-check-label" for="rememberMe" style="color: #94a3b8;">
                    로그인 상태 유지
                </label>
            </div>
            <button type="submit" class="btn btn-primary w-100">
                <i class="bi bi-box-arrow-in-right"></i> 로그인
            </button>
        </form>

        <div class="text-center mt-4" style="color: #64748b; font-size: 0.9rem; cursor: pointer;" onclick="location.href = '/admin/dashboard';">
            <i class="bi bi-info-circle"></i> 비로그인으로 입장
        </div>
    </div>
</div>

<script>
    // URL 파라미터에서 에러 메시지 확인
    const urlParams = new URLSearchParams(window.location.search);
    const error = urlParams.get('error');

    if (error) {
        const errorDiv = document.getElementById('errorMessage');
        errorDiv.textContent = '로그인에 실패했습니다. 아이디와 비밀번호를 확인해주세요.';
        errorDiv.style.display = 'block';
    }

    const logout = urlParams.get('logout');
    if (logout) {
        const errorDiv = document.getElementById('errorMessage');
        errorDiv.className = 'alert alert-success';
        errorDiv.textContent = '로그아웃되었습니다.';
        errorDiv.style.display = 'block';
    }
</script>
</body>
</html>
